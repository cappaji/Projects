CREATE DATABASE AIRLINES;

USE AIRLINES;

DROP TABLE BOOKING;
DROP TABLE AIRLINES;
DROP TABLE FLIGHTDETAILS;
DROP TABLE PASSENGER;
DROP TABLE CREDITCARD_PAYMENT;

SELECT * FROM AIRLINES;
SELECT * FROM FLIGHTDETAILS;
SELECT * FROM PASSENGER;
SELECT * FROM CREDITCARD_PAYMENT;
SELECT * FROM BOOKING;

CREATE TABLE AIRLINES(AIRLINES_ID int NOT NULL AUTO_INCREMENT,AIRLINES_NAME varchar(40),CARRIER_FS_CODE varchar(20),IMAGE varchar(30),PRIMARY KEY(AIRLINES_ID));
CREATE TABLE FLIGHTDETAILS(FLIGHT_ID int NOT NULL AUTO_INCREMENT,AIRLINES_ID int,FLIGHT_NUMBER varchar(10),DEPARTURE_DATE varchar(30),DEPARTURE_TIME varchar(30),DEPARTURE_CITY varchar(40),DEPARTURE_AIRPORT_NAME varchar(50),DEPARTURE_TERMINAL varchar(20),ARRIVAL_DATE varchar(30),ARRIVAL_TIME varchar(30),ARRIVAL_CITY varchar(40),ARRIVAL_AIRPORT_NAME varchar(50),ARRIVAL_TERMINAL varchar(20),STOPS varchar(10),TRAVEL_TIME varchar(20),FLIGHT_MODEL varchar(50),PRICE varchar(20),PRIMARY KEY(FLIGHT_ID),FOREIGN KEY(AIRLINES_ID) REFERENCES AIRLINES(AIRLINES_ID));
CREATE TABLE PASSENGER(PASSENGER_ID int NOT NULL AUTO_INCREMENT,FirstName varchar(20),LastName varchar(20),Gender varchar(15),PassengerType varchar(20),Phone varchar(20), EmailId varchar(20),PassportNumber varchar(20),IssuingCountry varchar(20),MealPreference varchar(40),PRIMARY KEY(PASSENGER_ID));
CREATE TABLE CREDITCARD_PAYMENT(PAYMENT_ID int NOT NULL AUTO_INCREMENT,CARD_NUMBER varchar(40),EXPIRY_MONTH varchar(10),EXPIRY_YEAR varchar(10),CARDHOLDERS_NAME varchar(50),CVV varchar(10),PRIMARY KEY(PAYMENT_ID));
CREATE TABLE BOOKING(PNR int NOT NULL AUTO_INCREMENT,PASSENGER_ID int,FLIGHT_ID int,PAYMENT_ID int,PRIMARY KEY(PNR),FOREIGN KEY(PASSENGER_ID) REFERENCES PASSENGER(PASSENGER_ID),FOREIGN KEY(FLIGHT_ID)REFERENCES FLIGHTDETAILS(FLIGHT_ID),FOREIGN KEY(PAYMENT_ID) REFERENCES CREDITCARD_PAYMENT(PAYMENT_ID));

INSERT INTO AIRLINES VALUES(NULL,"Jet Airways (India)","9W","./Images/JetAirways.png");
INSERT INTO AIRLINES VALUES(NULL,"AirFrance","AF","./Images/AirFrance.png");
INSERT INTO AIRLINES VALUES(NULL,"Etihad Airways","EY","./Images/EtihadAirways.png");
INSERT INTO AIRLINES VALUES(NULL,"Alitalia","AZ","./Images/Alitalia.png");
INSERT INTO AIRLINES VALUES(NULL,"Delta Airlines","DL","./Images/DeltaAirlines.png");
INSERT INTO AIRLINES VALUES(NULL,"KLM","KL","./Images/KLM.png");
INSERT INTO AIRLINES VALUES(NULL,"Virgin Atlantic","VS","./Images/VirginAtlantic.jpg");
INSERT INTO AIRLINES VALUES(NULL,"Vistara","UK*","./Images/Vistara.png");
INSERT INTO AIRLINES VALUES(NULL,"IndiGo","6E","./Images/IndiGo.png");
INSERT INTO AIRLINES VALUES(NULL,"Spice Jet","SG","./Images/SpiceJet.png");
INSERT INTO AIRLINES VALUES(NULL,"AirAsia India","I5*","./Images/AirAsia.png");
INSERT INTO AIRLINES VALUES(NULL,"Air India","AI","./Images/AirIndia.png");
INSERT INTO AIRLINES VALUES(NULL,"Air Canada","AC","./Images/AirCanada.png");
INSERT INTO AIRLINES VALUES(NULL,"Ethiopian Airlines","ET","./Images/EthiopianAirlines.png");
INSERT INTO AIRLINES VALUES(NULL,"Turkish Airlines","TK","./Images/TurkishAirlines.png");
INSERT INTO AIRLINES VALUES(NULL,"JetKonnect","S2","./Images/JetKonnect.png");
INSERT INTO AIRLINES VALUES(NULL,"Go Air","G8","./Images/GoAir.png");
INSERT INTO AIRLINES VALUES(NULL,"American Airlines","AA","./Images/AA.png");
INSERT INTO AIRLINES VALUES(NULL,"SriLankan Airlines","UL","./Images/SriLankanAirlines.png");
INSERT INTO AIRLINES VALUES(NULL,"Qatar Airways","QR","./Images/QatarAirways.png");
INSERT INTO AIRLINES VALUES(NULL,"Air Seychelles","HM","./Images/Seychelles.jpg");

INSERT INTO PASSENGER VALUES(NULL,'Sujan','Davangere Sunil','4804943949','sujands23@gmail.com','S12345','India','Vegetarian hindu Meal');

SELECT AIRLINES_ID FROM AIRLINES WHERE CARRIER_FS_CODE='9W';
INSERT INTO FLIGHTDETAILS VALUES(NULL,10,'10-12-2016');
SELECT MAX(FLIGHT_ID) FROM FLIGHTDETAILS;
INSERT INTO BOOKING VALUES(NULL,1,1);

DELETE FROM BOOKING WHERE PNR=1;

SELECT AIRLINES_NAME FROM AIRLINES WHERE CARRIER_FS_CODE='9W';

SELECT AIRLINES_ID FROM AIRLINES WHERE CARRIER_FS_CODE='AZ';

SELECT PNR FROM BOOKING;

SELECT 
B.PNR,
P.PASSENGER_ID,
P.FIRSTNAME,
P.LASTNAME,
P.GENDER,
P.PASSENGERTYPE,
P.PHONE,
P.EMAILID,
P.PASSPORTNUMBER,
P.ISSUINGCOUNTRY,
P.MEALPREFERENCE
FROM 
BOOKING B JOIN PASSENGER P
ON
B.PASSENGER_ID=P.PASSENGER_ID;

CREATE TABLE USERACCOUNTS (UserName varchar(20),Passwords varchar(20),Role varchar(20),PRIMARY KEY(UserName));
SELECT * FROM USERACCOUNTS;